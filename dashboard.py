import pygwalker as pyg
import pandas as pd
import streamlit.components.v1 as components
import streamlit as st
import numpy as np

# Adjust the width of the Streamlit page
st.set_page_config(
    page_title="Use Pygwalker In Streamlit",
    layout="wide"
)
 
# Add Title
st.title("HMO Reg")
 
# Import your data
df = pd.read_excel("MK_estate_combined3_24_Aug_2023_cleaned.xlsx")
 
# Generate the HTML using Pygwalker
# pyg_html = pyg.walk(df, return_html=True)
vis_spec = r"""{"config":"[{\"visId\":\"gw_uLXw\",\"name\":\"Mean Story of houses built per Estate\",\"encodings\":{\"dimensions\":[{\"dragId\":\"gw_Xfut\",\"fid\":\"GW_120S146758Y0G\",\"name\":\"Estate\",\"basename\":\"Estate\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_0STp\",\"fid\":\"GW_W62XNSAE25XCA2VHTINMTURTBK\",\"name\":\"Licence \\\\nNumber\",\"basename\":\"Licence \\\\nNumber\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_oyU3\",\"fid\":\"GW_4IUSCWNYLOGI2D1ISOT4ZXOVK\",\"name\":\"Licence Holder\",\"basename\":\"Licence Holder\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_cg52\",\"fid\":\"GW_N6WPSWXMCYHIFO6H6URKFN4\",\"name\":\"Manager/Agent\",\"basename\":\"Manager/Agent\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_mu9U\",\"fid\":\"GW_FFDFHOCGZ6JR8VHOG300\",\"name\":\"HMO Address\",\"basename\":\"HMO Address\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_3Sw-\",\"fid\":\"GW_20UBR4159BQ80912RZK\",\"name\":\"Conditions\",\"basename\":\"Conditions\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_qj9u\",\"fid\":\"GW_6UO7RIQH4K4LT31KKIO7TWVWMO1C\",\"name\":\"Referral\\\\n to RPT\",\"basename\":\"Referral\\\\n to RPT\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_lYpW\",\"fid\":\"GW_5ORD4P0D97S6XIVNBSC294DTSISW\",\"name\":\"Decision \\\\nof RPT\",\"basename\":\"Decision \\\\nof RPT\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_Iko-\",\"fid\":\"GW_63W5PLDSADRDZ15ESOIV3UHTX6B4\",\"name\":\"Issued\\\\n(5yearly)\",\"basename\":\"Issued\\\\n(5yearly)\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_v4vp\",\"fid\":\"GW_7IG9KH410PDGS0\",\"name\":\"Expires\",\"basename\":\"Expires\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_Nof5\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29PCHA78DW1DQGC34\",\"name\":\"Description: Is Terraced\",\"basename\":\"Description: Is Terraced\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_kZnk\",\"fid\":\"GW_V3PVYOHVU1CYDJ61OGONEIPR8JN8ZS4EQU930IWUUR4\",\"name\":\"Description: Is Town House\",\"basename\":\"Description: Is Town House\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_pDQ6\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29D1JE176FY5J0HF4\",\"name\":\"Description: Is Detached\",\"basename\":\"Description: Is Detached\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_TnGn\",\"fid\":\"GW_343JGBYA7K7RQR8453WF5ZK24L2AL74TQYF7F3K\",\"name\":\"Description: Year built\",\"basename\":\"Description: Year built\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"}],\"measures\":[{\"dragId\":\"gw_Gjqt\",\"fid\":\"GW_2KA4S2TZ4CYPTDQNCXC\",\"name\":\"Unnamed: 0\",\"basename\":\"Unnamed: 0\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_7_As\",\"fid\":\"GW_2IACGC284RQ3D8K2GHTTNIPEIXEK123G2TRK\",\"name\":\"Max Persons Permitted\",\"basename\":\"Max Persons Permitted\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_x55X\",\"fid\":\"GW_90W6463H7YNG34\",\"name\":\"Storeys\",\"basename\":\"Storeys\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_lPO6\",\"fid\":\"GW_2PC5ZKIYG0N608GYMARBO7RP6B4A7KKAK1M8\",\"name\":\"Sleeping Accomodation\",\"basename\":\"Sleeping Accomodation\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_m4GL\",\"fid\":\"GW_1RGZW5JAPP5W6GAPMU816DJYUWI5NKH80\",\"name\":\"Living Accomodation\",\"basename\":\"Living Accomodation\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_LJf1\",\"fid\":\"GW_DOM1T1TGY9WN52IIK1OJH9KX9ZU7OONTWW\",\"name\":\"Self Contained Flats\",\"basename\":\"Self Contained Flats\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_oOC2\",\"fid\":\"GW_PE593RMJ9W7NX3FKO2KT7A4PTM9RUVVZB1CW6O1C\",\"name\":\"Non Self Contained Flats\",\"basename\":\"Non Self Contained Flats\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_AqOh\",\"fid\":\"GW_8DIYH9H17F68Y3SBPJPTJC81OXALXNP3KRMHL1AR8LQDMSKW\",\"name\":\"Bath and Shower Rooms incl WC\",\"basename\":\"Bath and Shower Rooms incl WC\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_r_2C\",\"fid\":\"GW_1X9UP0F0JWGUT9ITU628AUCDU6JZAB774\",\"name\":\"Seperate WC and WHB\",\"basename\":\"Seperate WC and WHB\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_w0wA\",\"fid\":\"GW_AITFXARWFUSWOMM41YUO3F0I9RRGV3Z3J1JBHOCTN9D0VXGW\",\"name\":\"Seperate Bath and Shower Room\",\"basename\":\"Seperate Bath and Shower Room\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_omPy\",\"fid\":\"GW_MLO1BDC2VPL0JHIJ8LLG3LC\",\"name\":\"Kitchen/Diner\",\"basename\":\"Kitchen/Diner\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_count_fid\",\"fid\":\"gw_count_fid\",\"name\":\"Row count\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\",\"computed\":true,\"expression\":{\"op\":\"one\",\"params\":[],\"as\":\"gw_count_fid\"}}],\"rows\":[{\"dragId\":\"gw_W1Ww\",\"fid\":\"GW_90W6463H7YNG34\",\"name\":\"Storeys\",\"basename\":\"Storeys\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"mean\"}],\"columns\":[{\"dragId\":\"gw_Je2V\",\"fid\":\"GW_120S146758Y0G\",\"name\":\"Estate\",\"basename\":\"Estate\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\",\"sort\":\"descending\"}],\"color\":[],\"opacity\":[],\"size\":[],\"shape\":[],\"radius\":[],\"theta\":[],\"longitude\":[],\"latitude\":[],\"geoId\":[],\"details\":[],\"filters\":[{\"dragId\":\"gw_KIxy\",\"fid\":\"GW_120S146758Y0G\",\"name\":\"Estate\",\"basename\":\"Estate\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\",\"rule\":{\"type\":\"one of\",\"value\":[\"BEANHILL\",\"Bradwell\",\"CONNIBURROW, 162690\",\"FURZTON\",\"GREENLEYS\",\"HANSLOPE\",\"OLD FARM PARK\",\"OLNEY\",\"OXLEY PARK\",\"SHENLEY LODGE\",\"STONY STRATFORD\",\"STACEY BUSHES\",\"BRADVILLE\",\"CAMPBELL PARK\",\"GIFFARD PARK\",\"GLEBE FARM\",\"EAGLESTONE\",\"HEELANDS\",\"PENNYLAND\",\"SHENLEY CHURCH END\",\"DOWNS BARN\",\"LOUGHTON\",\"SPRINGFIELD\",\"COFFEE HALL\",\"MEDBOURNE\",\"MONKSTON PARK\",\"NEW BRADWELL\",\"WILLEN\",\"WOLVERTON\",\"GRANGE FARM\",\"OAKHILL\",\"TINKERS BRIDGE\",\"NETHERFIELD\",\"STANTONBURY\",\"PEARTREE BRIDGE\",\"BLETCHLEY\",\"BROUGHTON\",\"CENTRAL MILTON KEYNES\",\"CONNIBURROW\"]}}],\"text\":[]},\"config\":{\"defaultAggregated\":true,\"geoms\":[\"auto\"],\"showTableSummary\":false,\"coordSystem\":\"generic\",\"stack\":\"stack\",\"showActions\":false,\"interactiveScale\":false,\"sorted\":\"none\",\"zeroScale\":true,\"scaleIncludeUnmatchedChoropleth\":false,\"size\":{\"mode\":\"auto\",\"width\":320,\"height\":200},\"format\":{},\"geoKey\":\"name\",\"resolve\":{\"x\":false,\"y\":false,\"color\":false,\"opacity\":false,\"shape\":false,\"size\":false},\"limit\":-1}},{\"visId\":\"gw_hjBM\",\"name\":\"Mean Story of houses built per Year\",\"encodings\":{\"dimensions\":[{\"dragId\":\"gw_R55e\",\"fid\":\"GW_120S146758Y0G\",\"name\":\"Estate\",\"basename\":\"Estate\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_h0Kq\",\"fid\":\"GW_W62XNSAE25XCA2VHTINMTURTBK\",\"name\":\"Licence \\\\nNumber\",\"basename\":\"Licence \\\\nNumber\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_yPP6\",\"fid\":\"GW_4IUSCWNYLOGI2D1ISOT4ZXOVK\",\"name\":\"Licence Holder\",\"basename\":\"Licence Holder\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_wyVo\",\"fid\":\"GW_N6WPSWXMCYHIFO6H6URKFN4\",\"name\":\"Manager/Agent\",\"basename\":\"Manager/Agent\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_Orc8\",\"fid\":\"GW_FFDFHOCGZ6JR8VHOG300\",\"name\":\"HMO Address\",\"basename\":\"HMO Address\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_vAck\",\"fid\":\"GW_20UBR4159BQ80912RZK\",\"name\":\"Conditions\",\"basename\":\"Conditions\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_sSHL\",\"fid\":\"GW_6UO7RIQH4K4LT31KKIO7TWVWMO1C\",\"name\":\"Referral\\\\n to RPT\",\"basename\":\"Referral\\\\n to RPT\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_bnNg\",\"fid\":\"GW_5ORD4P0D97S6XIVNBSC294DTSISW\",\"name\":\"Decision \\\\nof RPT\",\"basename\":\"Decision \\\\nof RPT\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_eFss\",\"fid\":\"GW_63W5PLDSADRDZ15ESOIV3UHTX6B4\",\"name\":\"Issued\\\\n(5yearly)\",\"basename\":\"Issued\\\\n(5yearly)\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_D1Ly\",\"fid\":\"GW_7IG9KH410PDGS0\",\"name\":\"Expires\",\"basename\":\"Expires\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_TAut\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29PCHA78DW1DQGC34\",\"name\":\"Description: Is Terraced\",\"basename\":\"Description: Is Terraced\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_vEjZ\",\"fid\":\"GW_V3PVYOHVU1CYDJ61OGONEIPR8JN8ZS4EQU930IWUUR4\",\"name\":\"Description: Is Town House\",\"basename\":\"Description: Is Town House\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_chJ-\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29D1JE176FY5J0HF4\",\"name\":\"Description: Is Detached\",\"basename\":\"Description: Is Detached\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_1bhw\",\"fid\":\"GW_343JGBYA7K7RQR8453WF5ZK24L2AL74TQYF7F3K\",\"name\":\"Description: Year built\",\"basename\":\"Description: Year built\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"}],\"measures\":[{\"dragId\":\"gw_Dw6d\",\"fid\":\"GW_2KA4S2TZ4CYPTDQNCXC\",\"name\":\"Unnamed: 0\",\"basename\":\"Unnamed: 0\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_fqMU\",\"fid\":\"GW_2IACGC284RQ3D8K2GHTTNIPEIXEK123G2TRK\",\"name\":\"Max Persons Permitted\",\"basename\":\"Max Persons Permitted\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_staE\",\"fid\":\"GW_90W6463H7YNG34\",\"name\":\"Storeys\",\"basename\":\"Storeys\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_vChf\",\"fid\":\"GW_2PC5ZKIYG0N608GYMARBO7RP6B4A7KKAK1M8\",\"name\":\"Sleeping Accomodation\",\"basename\":\"Sleeping Accomodation\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_6g8m\",\"fid\":\"GW_1RGZW5JAPP5W6GAPMU816DJYUWI5NKH80\",\"name\":\"Living Accomodation\",\"basename\":\"Living Accomodation\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_s4K5\",\"fid\":\"GW_DOM1T1TGY9WN52IIK1OJH9KX9ZU7OONTWW\",\"name\":\"Self Contained Flats\",\"basename\":\"Self Contained Flats\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_FbAF\",\"fid\":\"GW_PE593RMJ9W7NX3FKO2KT7A4PTM9RUVVZB1CW6O1C\",\"name\":\"Non Self Contained Flats\",\"basename\":\"Non Self Contained Flats\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_PXNI\",\"fid\":\"GW_8DIYH9H17F68Y3SBPJPTJC81OXALXNP3KRMHL1AR8LQDMSKW\",\"name\":\"Bath and Shower Rooms incl WC\",\"basename\":\"Bath and Shower Rooms incl WC\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_xfq3\",\"fid\":\"GW_1X9UP0F0JWGUT9ITU628AUCDU6JZAB774\",\"name\":\"Seperate WC and WHB\",\"basename\":\"Seperate WC and WHB\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_QnTz\",\"fid\":\"GW_AITFXARWFUSWOMM41YUO3F0I9RRGV3Z3J1JBHOCTN9D0VXGW\",\"name\":\"Seperate Bath and Shower Room\",\"basename\":\"Seperate Bath and Shower Room\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_BDfl\",\"fid\":\"GW_MLO1BDC2VPL0JHIJ8LLG3LC\",\"name\":\"Kitchen/Diner\",\"basename\":\"Kitchen/Diner\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_count_fid\",\"fid\":\"gw_count_fid\",\"name\":\"Row count\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\",\"computed\":true,\"expression\":{\"op\":\"one\",\"params\":[],\"as\":\"gw_count_fid\"}}],\"rows\":[{\"dragId\":\"gw_Fgvl\",\"fid\":\"GW_90W6463H7YNG34\",\"name\":\"Storeys\",\"basename\":\"Storeys\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"mean\"}],\"columns\":[{\"dragId\":\"gw_WTEE\",\"fid\":\"GW_343JGBYA7K7RQR8453WF5ZK24L2AL74TQYF7F3K\",\"name\":\"Description: Year built\",\"basename\":\"Description: Year built\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\",\"sort\":\"descending\"}],\"color\":[],\"opacity\":[],\"size\":[],\"shape\":[],\"radius\":[],\"theta\":[],\"longitude\":[],\"latitude\":[],\"geoId\":[],\"details\":[],\"filters\":[{\"dragId\":\"gw_12Qi\",\"fid\":\"GW_343JGBYA7K7RQR8453WF5ZK24L2AL74TQYF7F3K\",\"name\":\"Description: Year built\",\"basename\":\"Description: Year built\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\",\"rule\":{\"type\":\"one of\",\"value\":[\"1919 - 44\",\"Post 1919 \",\"1945 - 1964\",\"Post 1980 \",\"1919 - 1944\",\"1945 - 64\",\"Post 1919\",\"1965 - 1980\",\"Post 1980\",\"1965 - 80\"]}}],\"text\":[]},\"config\":{\"defaultAggregated\":true,\"geoms\":[\"auto\"],\"showTableSummary\":false,\"coordSystem\":\"generic\",\"stack\":\"stack\",\"showActions\":false,\"interactiveScale\":false,\"sorted\":\"none\",\"zeroScale\":true,\"scaleIncludeUnmatchedChoropleth\":false,\"size\":{\"mode\":\"auto\",\"width\":320,\"height\":200},\"format\":{},\"geoKey\":\"name\",\"resolve\":{\"x\":false,\"y\":false,\"color\":false,\"opacity\":false,\"shape\":false,\"size\":false},\"limit\":-1}},{\"visId\":\"gw_Yl71\",\"name\":\"Storeys vs Max Persons Permitted vs Terraced\",\"encodings\":{\"dimensions\":[{\"dragId\":\"gw_-84X\",\"fid\":\"GW_120S146758Y0G\",\"name\":\"Estate\",\"basename\":\"Estate\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_ehYn\",\"fid\":\"GW_W62XNSAE25XCA2VHTINMTURTBK\",\"name\":\"Licence \\\\nNumber\",\"basename\":\"Licence \\\\nNumber\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_K0yJ\",\"fid\":\"GW_4IUSCWNYLOGI2D1ISOT4ZXOVK\",\"name\":\"Licence Holder\",\"basename\":\"Licence Holder\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_wDMq\",\"fid\":\"GW_N6WPSWXMCYHIFO6H6URKFN4\",\"name\":\"Manager/Agent\",\"basename\":\"Manager/Agent\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_iu6P\",\"fid\":\"GW_FFDFHOCGZ6JR8VHOG300\",\"name\":\"HMO Address\",\"basename\":\"HMO Address\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_CPzL\",\"fid\":\"GW_20UBR4159BQ80912RZK\",\"name\":\"Conditions\",\"basename\":\"Conditions\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_qMhR\",\"fid\":\"GW_6UO7RIQH4K4LT31KKIO7TWVWMO1C\",\"name\":\"Referral\\\\n to RPT\",\"basename\":\"Referral\\\\n to RPT\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_6sQl\",\"fid\":\"GW_5ORD4P0D97S6XIVNBSC294DTSISW\",\"name\":\"Decision \\\\nof RPT\",\"basename\":\"Decision \\\\nof RPT\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_h6mg\",\"fid\":\"GW_63W5PLDSADRDZ15ESOIV3UHTX6B4\",\"name\":\"Issued\\\\n(5yearly)\",\"basename\":\"Issued\\\\n(5yearly)\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_dRhW\",\"fid\":\"GW_7IG9KH410PDGS0\",\"name\":\"Expires\",\"basename\":\"Expires\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_N5q8\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29PCHA78DW1DQGC34\",\"name\":\"Description: Is Terraced\",\"basename\":\"Description: Is Terraced\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_9J0u\",\"fid\":\"GW_V3PVYOHVU1CYDJ61OGONEIPR8JN8ZS4EQU930IWUUR4\",\"name\":\"Description: Is Town House\",\"basename\":\"Description: Is Town House\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_lEFK\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29D1JE176FY5J0HF4\",\"name\":\"Description: Is Detached\",\"basename\":\"Description: Is Detached\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_WG0Y\",\"fid\":\"GW_343JGBYA7K7RQR8453WF5ZK24L2AL74TQYF7F3K\",\"name\":\"Description: Year built\",\"basename\":\"Description: Year built\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"}],\"measures\":[{\"dragId\":\"gw__PLD\",\"fid\":\"GW_2KA4S2TZ4CYPTDQNCXC\",\"name\":\"Unnamed: 0\",\"basename\":\"Unnamed: 0\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_cnYP\",\"fid\":\"GW_2IACGC284RQ3D8K2GHTTNIPEIXEK123G2TRK\",\"name\":\"Max Persons Permitted\",\"basename\":\"Max Persons Permitted\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_mO8k\",\"fid\":\"GW_90W6463H7YNG34\",\"name\":\"Storeys\",\"basename\":\"Storeys\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_W9KF\",\"fid\":\"GW_2PC5ZKIYG0N608GYMARBO7RP6B4A7KKAK1M8\",\"name\":\"Sleeping Accomodation\",\"basename\":\"Sleeping Accomodation\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_-PhH\",\"fid\":\"GW_1RGZW5JAPP5W6GAPMU816DJYUWI5NKH80\",\"name\":\"Living Accomodation\",\"basename\":\"Living Accomodation\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_sNpj\",\"fid\":\"GW_DOM1T1TGY9WN52IIK1OJH9KX9ZU7OONTWW\",\"name\":\"Self Contained Flats\",\"basename\":\"Self Contained Flats\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_XFdO\",\"fid\":\"GW_PE593RMJ9W7NX3FKO2KT7A4PTM9RUVVZB1CW6O1C\",\"name\":\"Non Self Contained Flats\",\"basename\":\"Non Self Contained Flats\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_S0U-\",\"fid\":\"GW_8DIYH9H17F68Y3SBPJPTJC81OXALXNP3KRMHL1AR8LQDMSKW\",\"name\":\"Bath and Shower Rooms incl WC\",\"basename\":\"Bath and Shower Rooms incl WC\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_luOC\",\"fid\":\"GW_1X9UP0F0JWGUT9ITU628AUCDU6JZAB774\",\"name\":\"Seperate WC and WHB\",\"basename\":\"Seperate WC and WHB\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_G-96\",\"fid\":\"GW_AITFXARWFUSWOMM41YUO3F0I9RRGV3Z3J1JBHOCTN9D0VXGW\",\"name\":\"Seperate Bath and Shower Room\",\"basename\":\"Seperate Bath and Shower Room\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_ERFW\",\"fid\":\"GW_MLO1BDC2VPL0JHIJ8LLG3LC\",\"name\":\"Kitchen/Diner\",\"basename\":\"Kitchen/Diner\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_count_fid\",\"fid\":\"gw_count_fid\",\"name\":\"Row count\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\",\"computed\":true,\"expression\":{\"op\":\"one\",\"params\":[],\"as\":\"gw_count_fid\"}}],\"rows\":[{\"dragId\":\"gw_m3Py\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29PCHA78DW1DQGC34\",\"name\":\"Description: Is Terraced\",\"basename\":\"Description: Is Terraced\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"}],\"columns\":[{\"dragId\":\"gw_nc72\",\"fid\":\"GW_90W6463H7YNG34\",\"name\":\"Storeys\",\"basename\":\"Storeys\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"mean\"},{\"dragId\":\"gw_iBbo\",\"fid\":\"GW_2IACGC284RQ3D8K2GHTTNIPEIXEK123G2TRK\",\"name\":\"Max Persons Permitted\",\"basename\":\"Max Persons Permitted\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"mean\"}],\"color\":[],\"opacity\":[],\"size\":[],\"shape\":[],\"radius\":[],\"theta\":[],\"longitude\":[],\"latitude\":[],\"geoId\":[],\"details\":[],\"filters\":[],\"text\":[]},\"config\":{\"defaultAggregated\":true,\"geoms\":[\"auto\"],\"showTableSummary\":false,\"coordSystem\":\"generic\",\"stack\":\"stack\",\"showActions\":false,\"interactiveScale\":false,\"sorted\":\"none\",\"zeroScale\":true,\"scaleIncludeUnmatchedChoropleth\":false,\"size\":{\"mode\":\"auto\",\"width\":320,\"height\":200},\"format\":{},\"geoKey\":\"name\",\"resolve\":{\"x\":false,\"y\":false,\"color\":false,\"opacity\":false,\"shape\":false,\"size\":false},\"limit\":-1}}]","chart_map":{},"version":"0.3.4"}"""
pyg_html = pyg.walk(df, spec=vis_spec, return_html=True)

# pyg_html = pyg.walk(df, return_html=True)

# Embed the HTML into the Streamlit app
components.html(pyg_html, height=1000, scrolling=True)

vis_spec = r"""{"config":"[{\"visId\":\"gw_uLXw\",\"name\":\"Mean Story of houses built per Estate\",\"encodings\":{\"dimensions\":[{\"dragId\":\"gw_Xfut\",\"fid\":\"GW_120S146758Y0G\",\"name\":\"Estate\",\"basename\":\"Estate\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_0STp\",\"fid\":\"GW_W62XNSAE25XCA2VHTINMTURTBK\",\"name\":\"Licence \\\\nNumber\",\"basename\":\"Licence \\\\nNumber\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_oyU3\",\"fid\":\"GW_4IUSCWNYLOGI2D1ISOT4ZXOVK\",\"name\":\"Licence Holder\",\"basename\":\"Licence Holder\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_cg52\",\"fid\":\"GW_N6WPSWXMCYHIFO6H6URKFN4\",\"name\":\"Manager/Agent\",\"basename\":\"Manager/Agent\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_mu9U\",\"fid\":\"GW_FFDFHOCGZ6JR8VHOG300\",\"name\":\"HMO Address\",\"basename\":\"HMO Address\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_3Sw-\",\"fid\":\"GW_20UBR4159BQ80912RZK\",\"name\":\"Conditions\",\"basename\":\"Conditions\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_qj9u\",\"fid\":\"GW_6UO7RIQH4K4LT31KKIO7TWVWMO1C\",\"name\":\"Referral\\\\n to RPT\",\"basename\":\"Referral\\\\n to RPT\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_lYpW\",\"fid\":\"GW_5ORD4P0D97S6XIVNBSC294DTSISW\",\"name\":\"Decision \\\\nof RPT\",\"basename\":\"Decision \\\\nof RPT\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_Iko-\",\"fid\":\"GW_63W5PLDSADRDZ15ESOIV3UHTX6B4\",\"name\":\"Issued\\\\n(5yearly)\",\"basename\":\"Issued\\\\n(5yearly)\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_v4vp\",\"fid\":\"GW_7IG9KH410PDGS0\",\"name\":\"Expires\",\"basename\":\"Expires\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_Nof5\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29PCHA78DW1DQGC34\",\"name\":\"Description: Is Terraced\",\"basename\":\"Description: Is Terraced\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_kZnk\",\"fid\":\"GW_V3PVYOHVU1CYDJ61OGONEIPR8JN8ZS4EQU930IWUUR4\",\"name\":\"Description: Is Town House\",\"basename\":\"Description: Is Town House\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_pDQ6\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29D1JE176FY5J0HF4\",\"name\":\"Description: Is Detached\",\"basename\":\"Description: Is Detached\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_TnGn\",\"fid\":\"GW_343JGBYA7K7RQR8453WF5ZK24L2AL74TQYF7F3K\",\"name\":\"Description: Year built\",\"basename\":\"Description: Year built\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"}],\"measures\":[{\"dragId\":\"gw_Gjqt\",\"fid\":\"GW_2KA4S2TZ4CYPTDQNCXC\",\"name\":\"Unnamed: 0\",\"basename\":\"Unnamed: 0\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_7_As\",\"fid\":\"GW_2IACGC284RQ3D8K2GHTTNIPEIXEK123G2TRK\",\"name\":\"Max Persons Permitted\",\"basename\":\"Max Persons Permitted\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_x55X\",\"fid\":\"GW_90W6463H7YNG34\",\"name\":\"Storeys\",\"basename\":\"Storeys\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_lPO6\",\"fid\":\"GW_2PC5ZKIYG0N608GYMARBO7RP6B4A7KKAK1M8\",\"name\":\"Sleeping Accomodation\",\"basename\":\"Sleeping Accomodation\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_m4GL\",\"fid\":\"GW_1RGZW5JAPP5W6GAPMU816DJYUWI5NKH80\",\"name\":\"Living Accomodation\",\"basename\":\"Living Accomodation\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_LJf1\",\"fid\":\"GW_DOM1T1TGY9WN52IIK1OJH9KX9ZU7OONTWW\",\"name\":\"Self Contained Flats\",\"basename\":\"Self Contained Flats\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_oOC2\",\"fid\":\"GW_PE593RMJ9W7NX3FKO2KT7A4PTM9RUVVZB1CW6O1C\",\"name\":\"Non Self Contained Flats\",\"basename\":\"Non Self Contained Flats\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_AqOh\",\"fid\":\"GW_8DIYH9H17F68Y3SBPJPTJC81OXALXNP3KRMHL1AR8LQDMSKW\",\"name\":\"Bath and Shower Rooms incl WC\",\"basename\":\"Bath and Shower Rooms incl WC\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_r_2C\",\"fid\":\"GW_1X9UP0F0JWGUT9ITU628AUCDU6JZAB774\",\"name\":\"Seperate WC and WHB\",\"basename\":\"Seperate WC and WHB\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_w0wA\",\"fid\":\"GW_AITFXARWFUSWOMM41YUO3F0I9RRGV3Z3J1JBHOCTN9D0VXGW\",\"name\":\"Seperate Bath and Shower Room\",\"basename\":\"Seperate Bath and Shower Room\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_omPy\",\"fid\":\"GW_MLO1BDC2VPL0JHIJ8LLG3LC\",\"name\":\"Kitchen/Diner\",\"basename\":\"Kitchen/Diner\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_count_fid\",\"fid\":\"gw_count_fid\",\"name\":\"Row count\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\",\"computed\":true,\"expression\":{\"op\":\"one\",\"params\":[],\"as\":\"gw_count_fid\"}}],\"rows\":[{\"dragId\":\"gw_W1Ww\",\"fid\":\"GW_90W6463H7YNG34\",\"name\":\"Storeys\",\"basename\":\"Storeys\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"mean\"}],\"columns\":[{\"dragId\":\"gw_Je2V\",\"fid\":\"GW_120S146758Y0G\",\"name\":\"Estate\",\"basename\":\"Estate\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\",\"sort\":\"descending\"}],\"color\":[],\"opacity\":[],\"size\":[],\"shape\":[],\"radius\":[],\"theta\":[],\"longitude\":[],\"latitude\":[],\"geoId\":[],\"details\":[],\"filters\":[{\"dragId\":\"gw_KIxy\",\"fid\":\"GW_120S146758Y0G\",\"name\":\"Estate\",\"basename\":\"Estate\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\",\"rule\":{\"type\":\"one of\",\"value\":[\"BEANHILL\",\"Bradwell\",\"CONNIBURROW, 162690\",\"FURZTON\",\"GREENLEYS\",\"HANSLOPE\",\"OLD FARM PARK\",\"OLNEY\",\"OXLEY PARK\",\"SHENLEY LODGE\",\"STONY STRATFORD\",\"STACEY BUSHES\",\"BRADVILLE\",\"CAMPBELL PARK\",\"GIFFARD PARK\",\"GLEBE FARM\",\"EAGLESTONE\",\"HEELANDS\",\"PENNYLAND\",\"SHENLEY CHURCH END\",\"DOWNS BARN\",\"LOUGHTON\",\"SPRINGFIELD\",\"COFFEE HALL\",\"MEDBOURNE\",\"MONKSTON PARK\",\"NEW BRADWELL\",\"WILLEN\",\"WOLVERTON\",\"GRANGE FARM\",\"OAKHILL\",\"TINKERS BRIDGE\",\"NETHERFIELD\",\"STANTONBURY\",\"PEARTREE BRIDGE\",\"BLETCHLEY\",\"BROUGHTON\",\"CENTRAL MILTON KEYNES\",\"CONNIBURROW\"]}}],\"text\":[]},\"config\":{\"defaultAggregated\":true,\"geoms\":[\"auto\"],\"showTableSummary\":false,\"coordSystem\":\"generic\",\"stack\":\"stack\",\"showActions\":false,\"interactiveScale\":false,\"sorted\":\"none\",\"zeroScale\":true,\"scaleIncludeUnmatchedChoropleth\":false,\"size\":{\"mode\":\"auto\",\"width\":320,\"height\":200},\"format\":{},\"geoKey\":\"name\",\"resolve\":{\"x\":false,\"y\":false,\"color\":false,\"opacity\":false,\"shape\":false,\"size\":false},\"limit\":-1}},{\"visId\":\"gw_hjBM\",\"name\":\"Mean Story of houses built per Year\",\"encodings\":{\"dimensions\":[{\"dragId\":\"gw_R55e\",\"fid\":\"GW_120S146758Y0G\",\"name\":\"Estate\",\"basename\":\"Estate\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_h0Kq\",\"fid\":\"GW_W62XNSAE25XCA2VHTINMTURTBK\",\"name\":\"Licence \\\\nNumber\",\"basename\":\"Licence \\\\nNumber\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_yPP6\",\"fid\":\"GW_4IUSCWNYLOGI2D1ISOT4ZXOVK\",\"name\":\"Licence Holder\",\"basename\":\"Licence Holder\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_wyVo\",\"fid\":\"GW_N6WPSWXMCYHIFO6H6URKFN4\",\"name\":\"Manager/Agent\",\"basename\":\"Manager/Agent\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_Orc8\",\"fid\":\"GW_FFDFHOCGZ6JR8VHOG300\",\"name\":\"HMO Address\",\"basename\":\"HMO Address\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_vAck\",\"fid\":\"GW_20UBR4159BQ80912RZK\",\"name\":\"Conditions\",\"basename\":\"Conditions\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_sSHL\",\"fid\":\"GW_6UO7RIQH4K4LT31KKIO7TWVWMO1C\",\"name\":\"Referral\\\\n to RPT\",\"basename\":\"Referral\\\\n to RPT\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_bnNg\",\"fid\":\"GW_5ORD4P0D97S6XIVNBSC294DTSISW\",\"name\":\"Decision \\\\nof RPT\",\"basename\":\"Decision \\\\nof RPT\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_eFss\",\"fid\":\"GW_63W5PLDSADRDZ15ESOIV3UHTX6B4\",\"name\":\"Issued\\\\n(5yearly)\",\"basename\":\"Issued\\\\n(5yearly)\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_D1Ly\",\"fid\":\"GW_7IG9KH410PDGS0\",\"name\":\"Expires\",\"basename\":\"Expires\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_TAut\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29PCHA78DW1DQGC34\",\"name\":\"Description: Is Terraced\",\"basename\":\"Description: Is Terraced\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_vEjZ\",\"fid\":\"GW_V3PVYOHVU1CYDJ61OGONEIPR8JN8ZS4EQU930IWUUR4\",\"name\":\"Description: Is Town House\",\"basename\":\"Description: Is Town House\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_chJ-\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29D1JE176FY5J0HF4\",\"name\":\"Description: Is Detached\",\"basename\":\"Description: Is Detached\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_1bhw\",\"fid\":\"GW_343JGBYA7K7RQR8453WF5ZK24L2AL74TQYF7F3K\",\"name\":\"Description: Year built\",\"basename\":\"Description: Year built\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"}],\"measures\":[{\"dragId\":\"gw_Dw6d\",\"fid\":\"GW_2KA4S2TZ4CYPTDQNCXC\",\"name\":\"Unnamed: 0\",\"basename\":\"Unnamed: 0\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_fqMU\",\"fid\":\"GW_2IACGC284RQ3D8K2GHTTNIPEIXEK123G2TRK\",\"name\":\"Max Persons Permitted\",\"basename\":\"Max Persons Permitted\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_staE\",\"fid\":\"GW_90W6463H7YNG34\",\"name\":\"Storeys\",\"basename\":\"Storeys\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_vChf\",\"fid\":\"GW_2PC5ZKIYG0N608GYMARBO7RP6B4A7KKAK1M8\",\"name\":\"Sleeping Accomodation\",\"basename\":\"Sleeping Accomodation\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_6g8m\",\"fid\":\"GW_1RGZW5JAPP5W6GAPMU816DJYUWI5NKH80\",\"name\":\"Living Accomodation\",\"basename\":\"Living Accomodation\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_s4K5\",\"fid\":\"GW_DOM1T1TGY9WN52IIK1OJH9KX9ZU7OONTWW\",\"name\":\"Self Contained Flats\",\"basename\":\"Self Contained Flats\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_FbAF\",\"fid\":\"GW_PE593RMJ9W7NX3FKO2KT7A4PTM9RUVVZB1CW6O1C\",\"name\":\"Non Self Contained Flats\",\"basename\":\"Non Self Contained Flats\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_PXNI\",\"fid\":\"GW_8DIYH9H17F68Y3SBPJPTJC81OXALXNP3KRMHL1AR8LQDMSKW\",\"name\":\"Bath and Shower Rooms incl WC\",\"basename\":\"Bath and Shower Rooms incl WC\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_xfq3\",\"fid\":\"GW_1X9UP0F0JWGUT9ITU628AUCDU6JZAB774\",\"name\":\"Seperate WC and WHB\",\"basename\":\"Seperate WC and WHB\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_QnTz\",\"fid\":\"GW_AITFXARWFUSWOMM41YUO3F0I9RRGV3Z3J1JBHOCTN9D0VXGW\",\"name\":\"Seperate Bath and Shower Room\",\"basename\":\"Seperate Bath and Shower Room\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_BDfl\",\"fid\":\"GW_MLO1BDC2VPL0JHIJ8LLG3LC\",\"name\":\"Kitchen/Diner\",\"basename\":\"Kitchen/Diner\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_count_fid\",\"fid\":\"gw_count_fid\",\"name\":\"Row count\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\",\"computed\":true,\"expression\":{\"op\":\"one\",\"params\":[],\"as\":\"gw_count_fid\"}}],\"rows\":[{\"dragId\":\"gw_Fgvl\",\"fid\":\"GW_90W6463H7YNG34\",\"name\":\"Storeys\",\"basename\":\"Storeys\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"mean\"}],\"columns\":[{\"dragId\":\"gw_WTEE\",\"fid\":\"GW_343JGBYA7K7RQR8453WF5ZK24L2AL74TQYF7F3K\",\"name\":\"Description: Year built\",\"basename\":\"Description: Year built\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\",\"sort\":\"descending\"}],\"color\":[],\"opacity\":[],\"size\":[],\"shape\":[],\"radius\":[],\"theta\":[],\"longitude\":[],\"latitude\":[],\"geoId\":[],\"details\":[],\"filters\":[{\"dragId\":\"gw_12Qi\",\"fid\":\"GW_343JGBYA7K7RQR8453WF5ZK24L2AL74TQYF7F3K\",\"name\":\"Description: Year built\",\"basename\":\"Description: Year built\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\",\"rule\":{\"type\":\"one of\",\"value\":[\"1919 - 44\",\"Post 1919 \",\"1945 - 1964\",\"Post 1980 \",\"1919 - 1944\",\"1945 - 64\",\"Post 1919\",\"1965 - 1980\",\"Post 1980\",\"1965 - 80\"]}}],\"text\":[]},\"config\":{\"defaultAggregated\":true,\"geoms\":[\"auto\"],\"showTableSummary\":false,\"coordSystem\":\"generic\",\"stack\":\"stack\",\"showActions\":false,\"interactiveScale\":false,\"sorted\":\"none\",\"zeroScale\":true,\"scaleIncludeUnmatchedChoropleth\":false,\"size\":{\"mode\":\"auto\",\"width\":320,\"height\":200},\"format\":{},\"geoKey\":\"name\",\"resolve\":{\"x\":false,\"y\":false,\"color\":false,\"opacity\":false,\"shape\":false,\"size\":false},\"limit\":-1}},{\"visId\":\"gw_Yl71\",\"name\":\"Storeys vs Max Persons Permitted vs Terraced\",\"encodings\":{\"dimensions\":[{\"dragId\":\"gw_-84X\",\"fid\":\"GW_120S146758Y0G\",\"name\":\"Estate\",\"basename\":\"Estate\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_ehYn\",\"fid\":\"GW_W62XNSAE25XCA2VHTINMTURTBK\",\"name\":\"Licence \\\\nNumber\",\"basename\":\"Licence \\\\nNumber\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_K0yJ\",\"fid\":\"GW_4IUSCWNYLOGI2D1ISOT4ZXOVK\",\"name\":\"Licence Holder\",\"basename\":\"Licence Holder\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_wDMq\",\"fid\":\"GW_N6WPSWXMCYHIFO6H6URKFN4\",\"name\":\"Manager/Agent\",\"basename\":\"Manager/Agent\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_iu6P\",\"fid\":\"GW_FFDFHOCGZ6JR8VHOG300\",\"name\":\"HMO Address\",\"basename\":\"HMO Address\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_CPzL\",\"fid\":\"GW_20UBR4159BQ80912RZK\",\"name\":\"Conditions\",\"basename\":\"Conditions\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_qMhR\",\"fid\":\"GW_6UO7RIQH4K4LT31KKIO7TWVWMO1C\",\"name\":\"Referral\\\\n to RPT\",\"basename\":\"Referral\\\\n to RPT\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_6sQl\",\"fid\":\"GW_5ORD4P0D97S6XIVNBSC294DTSISW\",\"name\":\"Decision \\\\nof RPT\",\"basename\":\"Decision \\\\nof RPT\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_h6mg\",\"fid\":\"GW_63W5PLDSADRDZ15ESOIV3UHTX6B4\",\"name\":\"Issued\\\\n(5yearly)\",\"basename\":\"Issued\\\\n(5yearly)\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_dRhW\",\"fid\":\"GW_7IG9KH410PDGS0\",\"name\":\"Expires\",\"basename\":\"Expires\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_N5q8\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29PCHA78DW1DQGC34\",\"name\":\"Description: Is Terraced\",\"basename\":\"Description: Is Terraced\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_9J0u\",\"fid\":\"GW_V3PVYOHVU1CYDJ61OGONEIPR8JN8ZS4EQU930IWUUR4\",\"name\":\"Description: Is Town House\",\"basename\":\"Description: Is Town House\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_lEFK\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29D1JE176FY5J0HF4\",\"name\":\"Description: Is Detached\",\"basename\":\"Description: Is Detached\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"},{\"dragId\":\"gw_WG0Y\",\"fid\":\"GW_343JGBYA7K7RQR8453WF5ZK24L2AL74TQYF7F3K\",\"name\":\"Description: Year built\",\"basename\":\"Description: Year built\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"}],\"measures\":[{\"dragId\":\"gw__PLD\",\"fid\":\"GW_2KA4S2TZ4CYPTDQNCXC\",\"name\":\"Unnamed: 0\",\"basename\":\"Unnamed: 0\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\"},{\"dragId\":\"gw_cnYP\",\"fid\":\"GW_2IACGC284RQ3D8K2GHTTNIPEIXEK123G2TRK\",\"name\":\"Max Persons Permitted\",\"basename\":\"Max Persons Permitted\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_mO8k\",\"fid\":\"GW_90W6463H7YNG34\",\"name\":\"Storeys\",\"basename\":\"Storeys\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_W9KF\",\"fid\":\"GW_2PC5ZKIYG0N608GYMARBO7RP6B4A7KKAK1M8\",\"name\":\"Sleeping Accomodation\",\"basename\":\"Sleeping Accomodation\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_-PhH\",\"fid\":\"GW_1RGZW5JAPP5W6GAPMU816DJYUWI5NKH80\",\"name\":\"Living Accomodation\",\"basename\":\"Living Accomodation\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_sNpj\",\"fid\":\"GW_DOM1T1TGY9WN52IIK1OJH9KX9ZU7OONTWW\",\"name\":\"Self Contained Flats\",\"basename\":\"Self Contained Flats\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_XFdO\",\"fid\":\"GW_PE593RMJ9W7NX3FKO2KT7A4PTM9RUVVZB1CW6O1C\",\"name\":\"Non Self Contained Flats\",\"basename\":\"Non Self Contained Flats\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_S0U-\",\"fid\":\"GW_8DIYH9H17F68Y3SBPJPTJC81OXALXNP3KRMHL1AR8LQDMSKW\",\"name\":\"Bath and Shower Rooms incl WC\",\"basename\":\"Bath and Shower Rooms incl WC\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_luOC\",\"fid\":\"GW_1X9UP0F0JWGUT9ITU628AUCDU6JZAB774\",\"name\":\"Seperate WC and WHB\",\"basename\":\"Seperate WC and WHB\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_G-96\",\"fid\":\"GW_AITFXARWFUSWOMM41YUO3F0I9RRGV3Z3J1JBHOCTN9D0VXGW\",\"name\":\"Seperate Bath and Shower Room\",\"basename\":\"Seperate Bath and Shower Room\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_ERFW\",\"fid\":\"GW_MLO1BDC2VPL0JHIJ8LLG3LC\",\"name\":\"Kitchen/Diner\",\"basename\":\"Kitchen/Diner\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"sum\"},{\"dragId\":\"gw_count_fid\",\"fid\":\"gw_count_fid\",\"name\":\"Row count\",\"analyticType\":\"measure\",\"semanticType\":\"quantitative\",\"aggName\":\"sum\",\"computed\":true,\"expression\":{\"op\":\"one\",\"params\":[],\"as\":\"gw_count_fid\"}}],\"rows\":[{\"dragId\":\"gw_m3Py\",\"fid\":\"GW_M556C4ZSLRR9A9LPGBQJR6D29PCHA78DW1DQGC34\",\"name\":\"Description: Is Terraced\",\"basename\":\"Description: Is Terraced\",\"semanticType\":\"nominal\",\"analyticType\":\"dimension\"}],\"columns\":[{\"dragId\":\"gw_nc72\",\"fid\":\"GW_90W6463H7YNG34\",\"name\":\"Storeys\",\"basename\":\"Storeys\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"mean\"},{\"dragId\":\"gw_iBbo\",\"fid\":\"GW_2IACGC284RQ3D8K2GHTTNIPEIXEK123G2TRK\",\"name\":\"Max Persons Permitted\",\"basename\":\"Max Persons Permitted\",\"analyticType\":\"measure\",\"semanticType\":\"ordinal\",\"aggName\":\"mean\"}],\"color\":[],\"opacity\":[],\"size\":[],\"shape\":[],\"radius\":[],\"theta\":[],\"longitude\":[],\"latitude\":[],\"geoId\":[],\"details\":[],\"filters\":[],\"text\":[]},\"config\":{\"defaultAggregated\":true,\"geoms\":[\"auto\"],\"showTableSummary\":false,\"coordSystem\":\"generic\",\"stack\":\"stack\",\"showActions\":false,\"interactiveScale\":false,\"sorted\":\"none\",\"zeroScale\":true,\"scaleIncludeUnmatchedChoropleth\":false,\"size\":{\"mode\":\"auto\",\"width\":320,\"height\":200},\"format\":{},\"geoKey\":\"name\",\"resolve\":{\"x\":false,\"y\":false,\"color\":false,\"opacity\":false,\"shape\":false,\"size\":false},\"limit\":-1}}]","chart_map":{},"version":"0.3.4"}"""
pyg_html2 = pyg.walk(df, spec=vis_spec, return_html=True)

components.html(pyg_html2, height=1000, scrolling=True)